import{j as e}from"./ui-vendor-CJq8dhki.js";import{r as i,L as x}from"./react-vendor-pL-Lea-m.js";import{u as f,t as N,o as y,s as P}from"./portal-DCQZ89tR.js";import{_ as S,C as v,d as C,e as L,f as k,g as F,A as h,h as A,i as u,ai as T,L as I,I as B,a as D,n as E,as as M}from"./admin-C3PgR-Dd.js";const O=y({email:P().email({message:"Invalid email address"})}),_=()=>{const{t:s}=S(),[l,c]=i.useState(!1),[a,r]=i.useState("idle"),[n,t]=i.useState(""),{register:g,handleSubmit:p,formState:{errors:d},reset:b}=f({resolver:N(O)}),j=async w=>{c(!0),r("idle"),t("");try{const o=await(await fetch("/api/password-reset-request.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(w)})).json();o.success?(r("success"),t(o.message),b()):(r("error"),t(o.message||s("forgotPassword.error")))}catch(m){console.error("Forgot password error:",m),r("error"),t(s("forgotPassword.networkError"))}finally{c(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-deep-purple via-black to-electric-blue pt-20 flex items-center justify-center",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs(v,{className:"max-w-md mx-auto bg-black/50 backdrop-blur-md border-white/10",children:[e.jsxs(C,{className:"text-center",children:[e.jsx(L,{className:"text-3xl font-bold text-white mb-2",children:s("forgotPassword.title")}),e.jsx(k,{className:"text-white/70 text-lg",children:s("forgotPassword.subtitle")})]}),e.jsxs(F,{className:"space-y-6",children:[a==="success"&&e.jsxs(h,{className:"border-green-500/50 bg-green-500/10",children:[e.jsx(A,{className:"h-4 w-4 text-green-400"}),e.jsx(u,{className:"text-green-400",children:n})]}),a==="error"&&e.jsxs(h,{variant:"destructive",children:[e.jsx(T,{className:"h-4 w-4"}),e.jsx(u,{children:n})]}),a!=="success"&&e.jsxs("form",{onSubmit:p(j),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(I,{htmlFor:"email",className:"text-white",children:[s("forgotPassword.emailLabel")," *"]}),e.jsx(B,{id:"email",type:"email",...g("email"),className:"bg-white/10 border-white/20 text-white placeholder:text-white/50",placeholder:s("forgotPassword.emailPlaceholder")}),d.email&&e.jsx("p",{className:"text-red-400 text-sm",children:d.email.message})]}),e.jsx(D,{type:"submit",className:"w-full bg-electric-blue hover:bg-electric-blue/80 text-deep-purple",disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"mr-2 h-4 w-4 animate-spin"}),s("common.loading")]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),s("forgotPassword.submitButton")]})})]}),e.jsxs("div",{className:"text-center text-white/70 text-sm space-y-2",children:[e.jsxs("p",{children:[s("forgotPassword.rememberPassword")," ",e.jsx(x,{to:"/member-login",className:"text-electric-blue hover:underline",children:s("forgotPassword.loginLink")})]}),e.jsxs("p",{children:[s("forgotPassword.noAccount")," ",e.jsx(x,{to:"/join-us",className:"text-electric-blue hover:underline",children:s("forgotPassword.joinLink")})]})]})]})]})})})};export{_ as default};
