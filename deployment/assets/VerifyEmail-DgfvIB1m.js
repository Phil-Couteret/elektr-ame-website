import{j as e}from"./ui-vendor-CJq8dhki.js";import{c as E,h as C,r,L as k}from"./react-vendor-pL-Lea-m.js";import{_ as S,C as B,d as A,e as V,f as L,g as T,n as F,A as a,h as p,i as t,as as d,a as x,ai as P}from"./admin-BnupzcLy.js";const H=()=>{const{t:s}=S(),i=E(),[b]=C(),o=b.get("token"),[l,h]=r.useState(!0),[g,v]=r.useState(!1),[y,j]=r.useState(!1),[u,m]=r.useState(""),[n,N]=r.useState("");r.useEffect(()=>{if(!o){h(!1),m(s("verifyEmail.noToken"));return}(async()=>{try{const c=await(await fetch("/api/email-verify.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({token:o})})).json();c.success?c.already_verified?j(!0):(v(!0),N(c.member_status)):m(c.message||s("verifyEmail.error"))}catch(f){console.error("Email verification error:",f),m(s("verifyEmail.networkError"))}finally{h(!1)}})()},[o,s]);const w=()=>{i(n==="approved"?"/member-login":"/")};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-deep-purple via-black to-electric-blue pt-20 flex items-center justify-center",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs(B,{className:"max-w-md mx-auto bg-black/50 backdrop-blur-md border-white/10",children:[e.jsxs(A,{className:"text-center",children:[e.jsx(V,{className:"text-3xl font-bold text-white mb-2",children:s("verifyEmail.title")}),e.jsx(L,{className:"text-white/70 text-lg",children:s("verifyEmail.subtitle")})]}),e.jsxs(T,{className:"space-y-6",children:[l&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(F,{className:"h-12 w-12 animate-spin text-electric-blue mx-auto mb-4"}),e.jsx("p",{className:"text-white/70",children:s("verifyEmail.verifying")})]}),!l&&g&&e.jsxs(e.Fragment,{children:[e.jsxs(a,{className:"border-green-500/50 bg-green-500/10",children:[e.jsx(p,{className:"h-4 w-4 text-green-400"}),e.jsx(t,{className:"text-green-400",children:s("verifyEmail.success")})]}),n==="pending"&&e.jsxs(a,{className:"border-blue-500/50 bg-blue-500/10",children:[e.jsx(d,{className:"h-4 w-4 text-blue-400"}),e.jsx(t,{className:"text-blue-400",children:s("verifyEmail.pendingApproval")})]}),n==="approved"&&e.jsxs(a,{className:"border-green-500/50 bg-green-500/10",children:[e.jsx(p,{className:"h-4 w-4 text-green-400"}),e.jsx(t,{className:"text-green-400",children:s("verifyEmail.canLogin")})]}),e.jsx(x,{onClick:w,className:"w-full bg-electric-blue hover:bg-electric-blue/80 text-deep-purple",children:s(n==="approved"?"verifyEmail.loginButton":"verifyEmail.homeButton")})]}),!l&&y&&e.jsxs(e.Fragment,{children:[e.jsxs(a,{className:"border-yellow-500/50 bg-yellow-500/10",children:[e.jsx(d,{className:"h-4 w-4 text-yellow-400"}),e.jsx(t,{className:"text-yellow-400",children:s("verifyEmail.alreadyVerified")})]}),e.jsx(x,{onClick:()=>i("/member-login"),className:"w-full bg-electric-blue hover:bg-electric-blue/80 text-deep-purple",children:s("verifyEmail.loginButton")})]}),!l&&u&&e.jsxs(e.Fragment,{children:[e.jsxs(a,{variant:"destructive",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsx(t,{children:u})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(x,{onClick:()=>i("/resend-verification"),variant:"outline",className:"w-full border-white/20 text-white hover:bg-white/10",children:[e.jsx(d,{className:"mr-2 h-4 w-4"}),s("verifyEmail.resendButton")]}),e.jsx("div",{className:"text-center text-white/70 text-sm",children:e.jsx(k,{to:"/",className:"text-electric-blue hover:underline",children:s("verifyEmail.homeButton")})})]})]})]})]})})})};export{H as default};
